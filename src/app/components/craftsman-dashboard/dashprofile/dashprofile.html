<div class="container py-4">
  <div *ngIf="loading" class="text-center py-5">
    <div class="spinner-border text-primary" role="status">
      <span class="visually-hidden">جاري التحميل...</span>
    </div>
    <p class="mt-3">جاري تحميل الملف الشخصي...</p>
  </div>

  <div *ngIf="!loading && !profile" class="alert alert-warning text-center" role="alert">
    <h4>لم يتم العثور على بيانات الملف الشخصي</h4>
    <p>الرجاء التأكد من اتصال الإنترنت وأن الخادم يعمل.</p>
  </div>

<section class="row" *ngIf="!loading && profile">
<div class="col-lg-8">
  <div class="card shadow-sm mb-4">
    <div class="card-body">
      <div class="d-flex flex-wrap gap-4 align-items-center">
        <div class="profile-img" [style.backgroundImage]="'url(' + (profile.avatarUrl || 'https://via.placeholder.com/150') + ')'"></div>

        <div class="flex-grow-1">
          <h4 class="fw-bold">{{ profile.name }} - {{ profile.job }}</h4>
          <div class="d-flex gap-3 text-muted small">
            <span *ngIf="profile.verified" class="text-success">✔ حساب موثق</span>
            <span *ngIf="profile.premium" class="text-warning">⭐ عضو مميز</span>
          </div>

          <div class="d-flex gap-4 mt-3">
            <div><strong>{{ profile.rating }}</strong> ⭐</div>
            <div><strong>{{ profile.successfulJobs }}</strong> عملية ناجحة</div>
            <div><strong>{{ profile.experienceYears }}</strong> سنوات خبرة</div>
          </div>
        </div>
      </div>
    </div>
  </div>

  <ul class="nav nav-tabs mb-3">
    <li class="nav-item">
      <a class="nav-link active" data-bs-toggle="tab" href="#about">نبذة عني</a>
    </li>
    <li class="nav-item">
      <a class="nav-link" data-bs-toggle="tab" href="#gallery">معرض الأعمال</a>
    </li>
    <li class="nav-item">
      <a class="nav-link" data-bs-toggle="tab" href="#skills">المهارات</a>
    </li>
  </ul>

  <div class="tab-content card shadow-sm">
    <div class="tab-pane fade show active p-4" id="about">
      <h5 class="fw-bold mb-2">عن {{ profile.name }}</h5>
      <p class="text-muted">{{ profile.about }}</p>
    </div>

    <div class="tab-pane fade p-4" id="gallery">
      <h5 class="fw-bold mb-2">معرض الأعمال</h5>
      <div class="d-flex flex-wrap gap-3">
        <img *ngFor="let img of profile.gallery" [src]="img" class="img-thumbnail" width="100">
      </div>
    </div>

    <div class="tab-pane fade p-4" id="skills">
      <h5 class="fw-bold mb-2">المهارات</h5>
      <ul>
        <li *ngFor="let skill of profile.skills">{{ skill }}</li>
      </ul>
    </div>
  </div>
</div>
</section>
</div>
